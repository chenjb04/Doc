# 结构体

## 概念

Go 语言中数组可以存储同一类型的数据，但在结构体中我们可以为不同项定义不同的数据类型。 结构体是由一系列具有相同类型或不同类型的数据构成的数据集合。

## 定义

语法

```go
type 结构体名 struct {
	memeber datatype
    memeber datatype
    memeber datatype
}
```

示例

```go
type Person struct {
	name string
	age int
	sex string
}
```

## 初始化结构体

示例

```go
// 方法1
var p1 Person
p1.name = "张三"
p1.age = 17
p1.sex = "男"
fmt.Println(p1)

// 方法2
p2 := Person{}
p2.name = "小红"
p2.age = 18
p2.sex = "女"
fmt.Println(p2)

// 方法3
p3 := Person{
    name: "李四",
    age: 18,
    sex: "男",
}
fmt.Println(p3)

//方法4
p4 := Person{"小明", 18, "男"}
fmt.Println(p4)

/*
{张三 17 男}
{小红 18 女}
{李四 18 男}
{小明 18 男}

*/
```

## 结构体指针

结构体也是值类型

```go
var pp1 *Person
fmt.Printf("pp1类型：%T\n", pp1)
fmt.Println(pp1)

pp1 = &p1
pp1.name = "小李"
fmt.Println(pp1)
fmt.Println(p1)

/*
pp1类型：*main.Person
<nil>
&{小李 17 男}
{小李 17 男}
*/
```

new也可以用来创建结构体指针

```go
pp2 := new(Person)
fmt.Printf("%T\n", pp2)
fmt.Println(pp2)
/*
*main.Person
&{ 0 }
*/
```

new可以创建任何类型的指针，返回指针，不是空指针

## make 和new

make用于内建类型（map、slice 和channel）的内存分配。new用于各种类型的内存分配 内建函数new本质上说跟其它语言中的同名函数功能一样：new(T)分配了零值填充的T类型的内存空间，并且返回其地址，即一个*T类型的值。用Go的术语说，它返回了一个指针，指向新分配的类型T的零值。有一点非常重要：new返回指针

内建函数make(T, args)与new(T)有着不同的功能，make只能创建slice、map和channel，并且返回一个有初始值(非零)的T类型，而不是*T。本质来讲，导致这三个类型有所不同的原因是指向数据结构的引用在使用前必须被初始化。例如，一个slice，是一个包含指向数据（内部array）的指针、长度和容量的三项描述符；在这些项目被初始化之前，slice为nil。对于slice、map和channel来说，make初始化了内部的数据结构，填充适当的值。

make返回初始化后的（非零）值。